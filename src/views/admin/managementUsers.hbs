<div class='mx-2'>

  <div class='search d-flex row' style='margin-top: 20px;'>
    <form class='form-inline my-2 my-lg-0 d-flex'>
      <input class='form-control mr-sm-2' type='search' placeholder='Search' aria-label='Search' />
      <button class='btn btn-outline-success my-2 my-sm-0' type='submit'>
        <i class='bi bi-search'></i>
        Search
      </button>
    </form>
    <form class='form-inline my-2'> 
      <button class='btn btn-outline-success my-2 my-sm-0' type='submit'>
        <i class='bi bi-person-fill-add'></i>
        Add
      </button>
    </form>
  </div>

  <table class='table table-striped table-bordered' id='users_table'>
    <thread>

    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
    </tr>
  </thread>
    
  </table>
  {{!-- <nav aria-label='...'>
    <ul class='pagination justify-content-end'>
      <li class='page-item disabled'>
        <a class='page-link' href='#' tabindex='-1' aria-disabled='true'>Previous</a>
      </li>
      <li class='page-item'><a class='page-link' href='#'>1</a></li>
      <li class='page-item active' aria-current='page'>
        <a class='page-link' href='#'>2</a>
      </li>
      <li class='page-item'><a class='page-link' href='#'>3</a></li>
      <li class='page-item'>
        <a class='page-link' href='#'>Next</a>
      </li>
    </ul>
  </nav> --}}
</div>
<script>
  $(document).ready(function () {
  $('#users_table').DataTable({
    serverSide: true,
    ajax(data, callback, settings) {
      const currentPage =
        Math.ceil(settings._iDisplayStart / settings._iDisplayLength) + 1;
      axios
        .get(`/api/v1/admin/users?limit=20&page=${currentPage}`)
        .then((res) => {
          const tmpJson = {
            recordsTotal: res.data.totalPages * 20,
            recordsFiltered: res.data.totalPages * 20,
            data: res.data.data,
            currentPage: res.data.currentPage,
          };
          callback(tmpJson);
        })
        .catch((e) => {
          console.log(e);
        });
    },
    dom: 'Bfrtip',
    displayStart: 0,
    serverSide: true,
    pageLength: 20,
    processing: true,
    bLengthChange: false,
    columns: [
      // {
      //   data: '_id',
      //   render(data, type, row) {
      //     return data;
      //   },
      // },
      {
        data: 'name',
        render(data, type, row) {
          return data;
        },
      },
      {
        data: 'email',
        render(data, type, row) {
          return data;
        },
      },
      {
        data: 'role',
        render(data, type, row) {
          return data;
        },
      },

    ],
  });
});

</script>

{{!-- <script src="/js/admin/users.js"></script> --}}